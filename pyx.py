#!/usr/bin/python
# Requires Python 2.6 or above

from string import *
import os
import signal

class SigHandler:
	def __init__(self):
		self.signaled = 0
		self.sn = None
	def __call__(self, sn, sf):
		self.sn = sn 
		self.signaled += 1

def find_qualified_radii():
	passed = []

	os.environ['RIGOR'] = '1'
	os.environ['NUM_RUNS'] = '1'
	
	# should start from 200 to ...
	for i in range(1000, 1200, 1):
		if sh.signaled:
			break
		r = '%f' % (i/10000.)	
		if os.name == 'nt':
			err = os.system('p '+r+' 700')
		else:
			err = os.system('./p '+r+' 700')
		if err == 0:
			passed.append(r)

	print passed
	return passed

def calc_pyx(radii):
	try:
		del os.environ['RIGOR']
	except KeyError:
		print >> sys.stderr, 'RIGOR not set'
	os.environ['NUM_RUNS'] = '10'

	for r in radii:
		if sh.signaled:
			break
		if os.name == 'nt':
			os.system('p '+r+' 700')
		else:
			os.system('./p '+r+' 700')

sh = SigHandler()

if __name__ == "__main__":
	signal.signal(signal.SIGINT, sh)
	signal.signal(signal.SIGBREAK, sh)	
	
	#radii = find_qualified_radii()
	radii = [
	# NUM_RUNS = 10 -->
	'0.022800', '0.022900', '0.023000', '0.023100', '0.023200', '0.023300', '0.023400', 
	'0.023500', '0.023600', '0.023700', '0.023800', '0.023900', '0.024000', '0.024100',
	'0.024200', '0.024300', '0.024400', '0.024500', '0.024600', '0.024700', '0.024800', 
	'0.024900', '0.025000', '0.025100', '0.025200', '0.025300', '0.025400', '0.025500', 
	'0.025600', '0.025700', '0.025800', '0.025900', '0.026000', '0.026100', '0.026200', 
	'0.026300', '0.026400', '0.026500', '0.026600', '0.026700', '0.027400', '0.028100',
	'0.031600', '0.031700', '0.031800', '0.031900', '0.032000', '0.032100', '0.032200',
	'0.032300', '0.032400', '0.032500', '0.032600', '0.032700', '0.032800', '0.032900',
	'0.033000', '0.033100', '0.033200', '0.033300', '0.033400', '0.033500', '0.033600', 
	'0.033700', '0.033800', '0.033900', '0.034000', '0.034100', '0.034200', '0.034300',
	'0.034400', '0.034500', '0.034600', '0.050000', '0.050100', '0.050200', '0.050300',
	'0.050400', '0.050500', '0.050600',
	# <-- NUM_RUNS = 10
	# NUM_RUNS = 3 -->
  '0.050700', '0.050800', '0.051300', '0.051600', '0.051700', '0.051800', '0.052800',
	'0.052900', '0.053000', '0.053100', '0.053200', '0.053300', '0.055200', '0.055300',
	'0.057800',
	# <-- NUM_RUNS = 3
	# gap between 0.06 and 0.1 here intentional
	# NUM_RUNS = 1 -->
	'0.100000', '0.100100', '0.100200', '0.100300', '0.100400', '0.100500', '0.100600', 
	'0.100700', '0.100800', '0.100900', '0.101000', '0.101100', '0.101200', '0.101300',
	'0.101400', '0.101500', '0.101600', '0.101700', '0.102000', '0.103000', '0.103100',
	'0.103200', '0.103300', '0.103400', '0.103500', '0.103600', '0.103700', '0.103800',
	'0.103900', '0.104500', '0.104600', '0.104700', '0.104800', '0.104900', '0.105000',
	'0.105100', '0.105200', '0.105300', '0.105400', '0.105500', '0.105600', '0.105700',
	'0.105800', '0.105900', '0.106000', '0.106100', '0.106600', '0.106700', '0.106800',
	'0.106900', '0.107000', '0.107100', '0.107200', '0.107300', '0.107400', '0.107500',
	'0.107600', '0.108600', '0.108700', '0.108800', '0.109000', '0.109100', '0.110700',
	'0.110800', '0.110900', '0.111000', '0.111100', '0.111200', '0.111300', '0.111400',
	'0.111500', '0.111600', '0.111700', '0.111800', '0.111900', '0.112000', '0.112100',
	'0.112200', '0.112300', '0.112400', '0.112500', '0.112600', '0.112700', '0.114600',
	'0.117000', '0.117100', '0.117200', '0.117300', '0.117400', '0.117500', '0.117600',
	'0.117700', '0.117800', '0.117900', '0.118000', '0.118100', '0.118200', '0.118300',
	'0.118400', '0.118500',	'0.124600', '0.124700', '0.124800', '0.124900', '0.125000',
	'0.125100', '0.125200',	'0.125300', '0.125400', '0.125500', '0.125600', '0.125700',
	'0.125800', '0.125900',	'0.126000', '0.126100', '0.126200', '0.126400', '0.126500',
	'0.128100', '0.128200',	'0.128300', '0.130100', '0.130200', '0.132800', '0.133200', 
	'0.133300', '0.135800',	'0.135900', '0.136000', '0.138500', '0.138600', '0.138700',
	'0.138800', '0.138900',	'0.139000', '0.139100', '0.139200', '0.139300', '0.139400',
	'0.139500', '0.139600',	'0.139700', '0.139800', '0.139900', '0.143400', '0.143500',
	'0.143600', '0.143700',	'0.143800', '0.144100', '0.144200', '0.144300', '0.144400',
	'0.144500', '0.144700',	'0.144800', '0.144900', '0.145400', '0.145500', '0.145600',
	'0.145700', '0.145800',	'0.145900', '0.146000', '0.146100', '0.146200', '0.146300',
	'0.146400', '0.146500',	'0.147000', '0.147100', '0.147200', '0.147300', '0.147500',
	'0.147600', '0.147700',	'0.147800', '0.147900', '0.148000', '0.148600', '0.148700',
	'0.148800', '0.148900',	'0.149000', '0.149600', '0.149700', '0.149800', '0.149900',
	'0.150000', '0.150100',	'0.150200', '0.150300', '0.150400', '0.150500', '0.150600',
	'0.150700', '0.150800',	'0.151000', '0.151100', '0.152800', '0.152900', '0.153000',
	'0.153100', '0.153200',	'0.153300', '0.153400', '0.153900', '0.154000', '0.154100',
	'0.154200', '0.154300',	'0.154700', '0.155000', '0.155800', '0.156800', '0.156900',
	'0.157100', '0.157200',	'0.160200', '0.160300', '0.160400', '0.160500', '0.160600',
	'0.160700', '0.160800',	'0.160900', '0.161000', '0.161100', '0.161200', '0.161300',
	'0.161400', '0.161500',	'0.161600', '0.161700', '0.161800', '0.161900', '0.162000',
	'0.162100', '0.162300',	'0.162400', '0.162500', '0.162900', '0.163000', '0.163100',
	'0.163200', '0.163300',	'0.163400', '0.163500', '0.163600', '0.163700', '0.163800',
	'0.163900', '0.164000',	'0.164100', '0.164400', '0.164500', '0.166200', '0.166400',
	'0.166500', '0.167100',	'0.169700', '0.170200', '0.171200', '0.171300', '0.171400',
	'0.171500', '0.171700',	'0.171900', '0.172000', '0.172100', '0.172200', '0.172300',
	'0.172400', '0.177200',	'0.177300', '0.177500', '0.178100', '0.178600'
	# <-- NUM_RUNS = 1
	]
	
	calc_pyx(radii)

# vim:ts=2:sw=2:
